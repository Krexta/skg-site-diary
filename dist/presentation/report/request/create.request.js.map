{"version":3,"sources":["../../../../src/presentation/report/request/create.request.ts"],"sourcesContent":["import { ApiProperty } from '@nestjs/swagger';\nimport { Transform, Type } from 'class-transformer';\nimport {\n  ArrayNotEmpty,\n  IsArray,\n  IsDateString,\n  IsEnum,\n  IsNotEmpty,\n  IsObject,\n  IsOptional,\n  IsString,\n  IsUrl,\n  IsUUID,\n  Matches,\n  MaxLength,\n  ValidateNested,\n} from 'class-validator';\n\nimport {\n  ICreateAttachedFile,\n  ICreateProgressCheckReportRequest,\n  ICreateProjectBudgetChangeRequest,\n  ICreateProjectCloseReportRequest,\n  ICreateProjectCommonReportRequest,\n  ICreateProjectMeetingReportRequest,\n  ICreateProjectStatusUpdateReportRequest,\n  ICreateProjectWorkerReportRequest,\n} from '../../../application/interface';\n\nexport class CreateAttachedFile implements ICreateAttachedFile {\n  @ApiProperty({\n    title: 'File name',\n    description: `\n- MinLength: 1\n- MaxLength: 255`,\n  })\n  @IsString()\n  @IsNotEmpty()\n  @MaxLength(255)\n  @Transform(({ value }) => value?.toString().trim())\n  file_name: string;\n\n  @ApiProperty({\n    title: 'File path',\n    description: 'File path',\n    example: 'example.com/1.pdf',\n  })\n  @IsUrl()\n  file_path: string;\n}\nexport class CreateProjectCommonReportRequest\n  implements ICreateProjectCommonReportRequest\n{\n  @ApiProperty({\n    title: 'Title',\n    description: `- MinLength: 1`,\n    required: false,\n  })\n  @IsString()\n  @IsNotEmpty()\n  @IsOptional()\n  @Transform(({ value }) => value?.toString().trim())\n  title?: string;\n  @ApiProperty({\n    title: 'Text',\n    description: `- MinLength: 1`,\n    required: false,\n  })\n  @IsString()\n  @IsNotEmpty()\n  @IsOptional()\n  @Transform(({ value }) => value?.toString().trim())\n  report_text?: string;\n\n  @ApiProperty({\n    title: 'Attached files',\n    description: 'List of attached files',\n    example: [\n      { file_name: '1.jpg', file_path: 'example.com/1.jpg' },\n      { file_name: '2.pdf', file_path: 'example.com/2.pdf' },\n    ],\n    type: [CreateAttachedFile],\n  })\n  @IsArray()\n  @ValidateNested({ each: true })\n  @Type(() => CreateAttachedFile)\n  attached_files: CreateAttachedFile[];\n\n  @ApiProperty({ title: 'Project id', description: 'UUIDv7' })\n  @IsUUID(7, { message: 'project_id must be UUIDv7' })\n  project_id: string;\n\n  @ApiProperty({\n    title: 'Report date',\n    format: 'yyyy-MM-dd',\n  })\n  @IsDateString({ strict: true })\n  report_date: string;\n}\n\nexport class CreateProgressCheckReportRequest\n  extends CreateProjectCommonReportRequest\n  implements ICreateProgressCheckReportRequest\n{\n  @ApiProperty({\n    title: 'Execution budget unit id',\n    description: 'UUIDv7',\n  })\n  @IsUUID(7, { message: 'execution_budget_unit_id must be UUIDv7' })\n  execution_budget_unit_id: string;\n\n  @ApiProperty({\n    title: 'Progress report data',\n    description: 'Json',\n  })\n  @IsObject()\n  progress_report_data: object;\n\n  @ApiProperty({\n    title: 'Total performance percentage',\n    description: `\n- Must be positive\n- Must be Decimal(3,1)\n`,\n    required: false,\n  })\n  @IsOptional()\n  @Matches(/^(?:[0-9]{3}|([0-9]{1,2}(\\.[0-9])?))$/, {\n    message: 'total_performance_percentage must be positive Decimal(3,1)',\n  })\n  total_performance_percentage?: string;\n\n  @ApiProperty({\n    title: 'Consumed workers percentage',\n    description: `\n- Must be positive\n- Must be Decimal(3,2)\n`,\n    required: false,\n  })\n  @IsOptional()\n  @Matches(/^(?:[0-9]{3}|([0-9]{1,2}(\\.[0-9])?)|([0-9]{1}(\\.[0-9]{2})?))$/, {\n    message: 'consumed_workers_percentage must be positive Decimal(3,2)',\n  })\n  consumed_workers_percentage?: string;\n\n  @ApiProperty({ title: 'Reported worker ids', description: 'UUIDv7' })\n  @IsUUID(7, { message: 'reported_worker_id must be UUIDv7', each: true })\n  @ArrayNotEmpty()\n  @IsArray()\n  reported_worker_ids: string[];\n}\n\nexport class CreateProjectBudgetChangeRequest\n  extends CreateProjectCommonReportRequest\n  implements ICreateProjectBudgetChangeRequest\n{\n  @ApiProperty({\n    title: 'Change reason code',\n    enum: [\n      'BUDGET_ERROR',\n      'WORKING_MISTAKE',\n      'CONSTRUCTION_CHANGE',\n      'CONSTRUCTOR_MISTAKE',\n      'PROCEDURE_MISTAKE',\n      'TIME_LIMIT',\n    ],\n  })\n  @IsEnum(\n    [\n      'BUDGET_ERROR',\n      'WORKING_MISTAKE',\n      'CONSTRUCTION_CHANGE',\n      'CONSTRUCTOR_MISTAKE',\n      'PROCEDURE_MISTAKE',\n      'TIME_LIMIT',\n    ],\n    {\n      message:\n        \"change_reason_code must be one of the following values: ['BUDGET_ERROR', 'WORKING_MISTAKE', 'CONSTRUCTION_CHANGE', 'CONSTRUCTOR_MISTAKE', 'PROCEDURE_MISTAKE', 'TIME_LIMIT']\",\n    },\n  )\n  change_reason_code: string;\n  @ApiProperty({ title: 'Billing client id', description: 'UUIDv7' })\n  @IsUUID(7, { message: 'billing_client_id must be UUIDv7' })\n  billing_client_id: string;\n}\n\nexport class CreateProjectCloseReportRequest\n  extends CreateProjectCommonReportRequest\n  implements ICreateProjectCloseReportRequest\n{\n  @ApiProperty({ title: 'Close report checklist', description: 'Json' })\n  @IsObject()\n  close_report_checklist: object;\n}\n\nexport class CreateProjectMeetingReportRequest\n  extends CreateProjectCommonReportRequest\n  implements ICreateProjectMeetingReportRequest {}\n\nexport class CreateProjectStatusUpdateReportRequest\n  extends CreateProjectCommonReportRequest\n  implements ICreateProjectStatusUpdateReportRequest\n{\n  @ApiProperty({\n    title: 'Project status code',\n    enum: [\n      'NOT_STARTED',\n      'DESIGN_IN_PROGRESS',\n      'START_AT_NEXT_MONTH',\n      'IN_PROGRESS_AT_SITE',\n      'CONSTRUCTION_COMPLETE',\n      'MONTHLY_REPORT_COMPLETE',\n      'PAYMENT_RECEIVED',\n      'ABORTED',\n      'DELETED',\n    ],\n  })\n  @IsEnum(\n    [\n      'NOT_STARTED',\n      'DESIGN_IN_PROGRESS',\n      'START_AT_NEXT_MONTH',\n      'IN_PROGRESS_AT_SITE',\n      'CONSTRUCTION_COMPLETE',\n      'MONTHLY_REPORT_COMPLETE',\n      'PAYMENT_RECEIVED',\n      'ABORTED',\n      'DELETED',\n    ],\n    {\n      message:\n        \"project_status_code must be one of the following values: ['NOT_STARTED', 'DESIGN_IN_PROGRESS', 'START_AT_NEXT_MONTH', 'IN_PROGRESS_AT_SITE', 'CONSTRUCTION_COMPLETE', 'MONTHLY_REPORT_COMPLETE', 'PAYMENT_RECEIVED', 'ABORTED', 'DELETED']\",\n    },\n  )\n  project_status_code: string;\n}\n\nexport class CreateProjectWorkerReportRequest\n  extends CreateProjectCommonReportRequest\n  implements ICreateProjectWorkerReportRequest\n{\n  @ApiProperty({\n    title: 'Report type code',\n    description: `\n- MinLength: 1\n- MaxLength: 20`,\n    required: false,\n  })\n  @IsString()\n  @IsNotEmpty()\n  @MaxLength(20)\n  @IsOptional()\n  @Transform(({ value }) => value?.toString().trim())\n  report_type_code?: string;\n\n  @ApiProperty({ title: 'Reported worker ids', description: 'UUIDv7' })\n  @IsUUID(7, { message: 'reported_worker_id must be UUIDv7', each: true })\n  @ArrayNotEmpty()\n  @IsArray()\n  reported_worker_ids: string[];\n}\n"],"names":["ApiProperty","Transform","Type","ArrayNotEmpty","IsArray","IsDateString","IsEnum","IsNotEmpty","IsObject","IsOptional","IsString","IsUrl","IsUUID","Matches","MaxLength","ValidateNested","CreateAttachedFile","title","description","value","toString","trim","example","CreateProjectCommonReportRequest","required","file_name","file_path","type","each","message","format","strict","CreateProgressCheckReportRequest","CreateProjectBudgetChangeRequest","enum","CreateProjectCloseReportRequest","CreateProjectMeetingReportRequest","CreateProjectStatusUpdateReportRequest","CreateProjectWorkerReportRequest"],"mappings":";;;;;;;;;AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,EAAEC,IAAI,QAAQ,oBAAoB;AACpD,SACEC,aAAa,EACbC,OAAO,EACPC,YAAY,EACZC,MAAM,EACNC,UAAU,EACVC,QAAQ,EACRC,UAAU,EACVC,QAAQ,EACRC,KAAK,EACLC,MAAM,EACNC,OAAO,EACPC,SAAS,EACTC,cAAc,QACT,kBAAkB;AAazB,OAAO,MAAMC;AAoBb;;;QAlBIC,OAAO;QACPC,aAAa,CAAC;;gBAEF,CAAC;;;;;eAKH,EAAEC,KAAK,EAAE,GAAKA,OAAOC,WAAWC;;;;;QAI1CJ,OAAO;QACPC,aAAa;QACbI,SAAS;;;;;AAKb,OAAO,MAAMC;AAgDb;;;QA5CIN,OAAO;QACPC,aAAa,CAAC,cAAc,CAAC;QAC7BM,UAAU;;;;;eAKA,EAAEL,KAAK,EAAE,GAAKA,OAAOC,WAAWC;;;;;QAG1CJ,OAAO;QACPC,aAAa,CAAC,cAAc,CAAC;QAC7BM,UAAU;;;;;eAKA,EAAEL,KAAK,EAAE,GAAKA,OAAOC,WAAWC;;;;;QAI1CJ,OAAO;QACPC,aAAa;QACbI,SAAS;YACP;gBAAEG,WAAW;gBAASC,WAAW;YAAoB;YACrD;gBAAED,WAAW;gBAASC,WAAW;YAAoB;SACtD;QACDC,MAAM;YAACX;SAAmB;;;;QAGVY,MAAM;;aACZZ;;;;;QAGGC,OAAO;QAAcC,aAAa;;;QACpCW,SAAS;;;;;;QAIpBZ,OAAO;QACPa,QAAQ;;;QAEMC,QAAQ;;;;AAI1B,OAAO,MAAMC,yCACHT;AAkDV;;;QA9CIN,OAAO;QACPC,aAAa;;;QAEFW,SAAS;;;;;;QAIpBZ,OAAO;QACPC,aAAa;;;;;;;QAMbD,OAAO;QACPC,aAAa,CAAC;;;AAGlB,CAAC;QACGM,UAAU;;;;QAIVK,SAAS;;;;;;QAKTZ,OAAO;QACPC,aAAa,CAAC;;;AAGlB,CAAC;QACGM,UAAU;;;;QAIVK,SAAS;;;;;;QAIIZ,OAAO;QAAuBC,aAAa;;;QAC7CW,SAAS;QAAqCD,MAAM;;;;;;AAMnE,OAAO,MAAMK,yCACHV;AAgCV;;;QA5BIN,OAAO;QACPiB,MAAM;YACJ;YACA;YACA;YACA;YACA;YACA;SACD;;;QAIC;QACA;QACA;QACA;QACA;QACA;;QAGAL,SACE;;;;;;QAISZ,OAAO;QAAqBC,aAAa;;;QAC3CW,SAAS;;;;AAIxB,OAAO,MAAMM,wCACHZ;AAMV;;;QAHiBN,OAAO;QAA0BC,aAAa;;;;;AAK/D,OAAO,MAAMkB,0CACHb;AACuC;AAEjD,OAAO,MAAMc,+CACHd;AAmCV;;;QA/BIN,OAAO;QACPiB,MAAM;YACJ;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;;;QAIC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAGAL,SACE;;;;AAMR,OAAO,MAAMS,yCACHf;AAsBV;;;QAlBIN,OAAO;QACPC,aAAa,CAAC;;eAEH,CAAC;QACZM,UAAU;;;;;;eAMA,EAAEL,KAAK,EAAE,GAAKA,OAAOC,WAAWC;;;;;QAG7BJ,OAAO;QAAuBC,aAAa;;;QAC7CW,SAAS;QAAqCD,MAAM"}